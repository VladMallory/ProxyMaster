# ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

## üéâ –ü—Ä–æ–µ–∫—Ç —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω!

–í—Å–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å PostgreSQL.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### ‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–µ —Ñ–∞–π–ª—ã (–∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è):
- `common/database.go` - –ü–µ—Ä–µ–∞–¥—Ä–µ—Å—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è PostgreSQL
- `common/postgres.go` - –û—Å–Ω–æ–≤–Ω–æ–π PostgreSQL –∞–¥–∞–ø—Ç–µ—Ä
- `common/types.go` - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- `postgres_schema.sql` - SQL —Å—Ö–µ–º–∞ –¥–ª—è PostgreSQL
- `setup_postgres.sh` - –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üì¶ Backup —Ñ–∞–π–ª—ã (–Ω–µ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏):
- `common/database_mongodb.go.backup` - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ MongoDB —Ñ—É–Ω–∫—Ü–∏–∏
- `migrate_to_postgres.go.backup` - –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- `migration_go.mod` - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

### 1. –î–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ MongoDB:
```bash
# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏—Å–ø–æ–ª—å–∑—É—è backup —Ñ–∞–π–ª)
cp migrate_to_postgres.go.backup migrate_data.go
go mod tidy -modfile=migration_go.mod
go run -modfile=migration_go.mod migrate_data.go
rm migrate_data.go  # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

### 2. –î–ª—è –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞:
```bash
# –û–±—ã—á–Ω—ã–π –∑–∞–ø—É—Å–∫ (—É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
go run main.go
```

## üîß –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π** - `database_mongodb.go` ‚Üí `database_mongodb.go.backup`
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ main()** - `migrate_to_postgres.go` ‚Üí `migrate_to_postgres.go.backup`
3. **–ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** - —É–¥–∞–ª–µ–Ω—ã –ª–∏—à–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
4. **–û—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω—ã `StartExpiredConfigsCleanup` –∏ `StartTrafficMonitoring`
5. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∏–ø–æ–≤** - –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–∏–ø—ã –∏–∑ `types.go`

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

- ‚úÖ **–ö–æ–º–ø–∏–ª—è—Ü–∏—è** - –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** - –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è PostgreSQL  
- ‚úÖ **Backup —Ñ–∞–π–ª—ã** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –¥–ª—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–∞
- ‚úÖ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞** - –æ—á–∏—â–µ–Ω–∞ –æ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤

## üìã –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL: `./setup_postgres.sh`
2. –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `source .env.postgres`
3. –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞: `go run main.go`

–í—Å—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞, –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞! üöÄ
