# Bot - –ë–æ—Ç –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –ø–æ–¥–ø–∏—Å–æ–∫ VLESS
- –†–∞–±–æ—Ç–∞–µ—Ç —Å –ø–∞–Ω–µ–ª—å—é 3x-ui
- –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–≥—É–ª–∏—Ä—É—é—Ç—Å—è –≤ config.go

---
## –§–∏—á–∏
**–ú–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å**

===–¢—Ä–∞—Ñ–∏–∫===
   - –†–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –≤ `/common/config.go`, —Ä–∞–∑–¥–µ–ª `TRAFIC`
   - –û—Ç–∫–ª—é—á–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±–æ–ª—å—à–µ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ–º —É–∫–∞–∑–∞–Ω–æ –≤ `TRAFFIC_LIMIT_GB`
   - `TRAFFIC_RESET_INTERVAL` - —Å–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞. –ù–∞–ø—Ä–∏–º–µ—Ä –∫–∞–∂–¥—ã–π –º–µ—Å—è—Ü –±—É–¥–µ—Ç –æ–±–Ω—É–ª—è—Ç—å—Å—è
   - `TRAFFIC_CHECK_INTERVAL` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞, –ø—Ä–µ–≤—ã—Å–∏–ª –ª–∏ –∫–ª–∏–µ–Ω—Ç –ª–∏–º–∏—Ç—ã

===IP BAN===
- –†–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –º–æ–∂–Ω–æ –≤ `/common/config.go`, —Ä–∞–∑–¥–µ–ª `IP Ban`
   - –†–µ–∫–æ–º–µ–Ω–¥—É—é –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü–æ—Å–∫–æ–ª—å–∫—É —Ç–∞–º —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–∞–π–ª–∞ `/usr/local/x-ui/access.log`, –ø–∞–Ω–µ–ª—å 3x-ui –µ–≥–æ —á–∏—Å—Ç–∏—Ç –∫–∞–∂–¥—ã–µ 30-60 –º–∏–Ω—É—Ç –∏ –µ—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –¥–∞–≤–∞—Ç—å –±–∞–Ω –º–µ–Ω—å—à–µ —á–µ–º —ç—Ç–æ –≤—Ä–µ–º—è, –∫–ª–∏–µ–Ω—Ç—É –±—É–¥–µ—Ç –ø—Ä–∏–ª–µ—Ç–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –±–∞–Ω. –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫ —Å–Ω–∏–∑—É. –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–æ, —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   
 ```go
IP_BAN_ENABLED = true                               // –í–∫–ª—é—á–µ–Ω–∞ –ª–∏ —Å–∏—Å—Ç–µ–º–∞ IP –±–∞–Ω–∞
ACCESS_LOG_PATH = "/usr/local/x-ui/access.log"      // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É access.log
IP_ACCUMULATED_PATH = "/var/log/ip_accumulated.log" // –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤
MAX_IPS_PER_CONFIG = 1                              // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ IP –∞–¥—Ä–µ—Å–æ–≤ –Ω–∞ –æ–¥–∏–Ω –∫–æ–Ω—Ñ–∏–≥ (–µ—Å–ª–∏ –±–æ–ª—å—à–µ - –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è)
IP_SAVE_INTERVAL = 25                               // –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –≤ –º–∏–Ω—É—Ç–∞—Ö
IP_CHECK_INTERVAL = 25                              // –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ IP –≤ –º–∏–Ω—É—Ç–∞—Ö
IP_BAN_DURATION = 120                               // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–Ω–∞ –≤ –º–∏–Ω—É—Ç–∞—Ö (1 —á–∞—Å)
IP_COUNTER_RETENTION = 20                           // –í—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤ IP –≤ –º–∏–Ω—É—Ç–∞—Ö (3 —á–∞—Å–∞ - –≤ 3 —Ä–∞–∑–∞ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –±–∞–Ω–∞ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã)
IP_CLEANUP_INTERVAL = 1   
   ```

**–ù–µ–ª—å–∑—è –æ—Ç–∫–ª—é—á–∏—Ç—å**
- –î–µ–ª–∞–µ—Ç—Å—è –±–µ–∫–∞–ø –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –Ω–µ–µ –ø—Ä–∏ —Å–º–µ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- `common/config.go/TRIAL_PERIOD_DAYS = 1` - —É–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ –∫–ª–∏–µ–Ω—Ç—É

---
# ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `common/postgres.go`:

```go
// –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è PostgreSQL –≤ common/postgres.go
const (
	PG_HOST     = "localhost"            // –•–æ—Å—Ç PostgreSQL —Å–µ—Ä–≤–µ—Ä–∞
	PG_PORT     = 5432                   // –ü–æ—Ä—Ç PostgreSQL (–æ–±—ã—á–Ω–æ 5432)
	PG_USER     = "vpn_bot_user"         // –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
	PG_PASSWORD = "your_secure_password" // –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
	PG_DBNAME   = "vpn_bot"              // –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
)
```

**‚ùó –í–ê–ñ–ù–û**: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —ç—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤ `common/postgres.go` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞:
1. **PG_USER** - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è PostgreSQL
2. **PG_PASSWORD** - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
3. **PG_DBNAME** - –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. **PG_HOST** - –µ—Å–ª–∏ PostgreSQL –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, —É–∫–∞–∂–∏—Ç–µ –µ–≥–æ IP/–¥–æ–º–µ–Ω

---
### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É

1. –°–¥–µ–ª–∞—Ç—å config.go
   ```bash
   cp common/config.go.example common/config.go
   ```

---
2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `common/config.go`** –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```go
// –¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram (–ø–æ–ª—É—á–∏—Ç–µ —É @BotFather)
BOT_TOKEN = "–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞"

// ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–≤–∞—à Telegram ID)
ADMIN_ID = 123456789

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–∞–Ω–µ–ª–∏ 3x-ui
PANEL_URL = "https://your-panel.com:57578/your-path/"
PANEL_USER = "username"
PANEL_PASS = "password"
INBOUND_ID = 3 // –≤ –ø–∞–Ω–µ–ª–∏ 3x-ui –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å id –∏–Ω–±–∞—É–Ω–¥–∞

// URL –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
CONFIG_BASE_URL = "https://your-domain.com:2096/sub/"
CONFIG_JSON_URL = "https://your-domain.com:2096/json/"

// URL –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
REDIRECT_DOMAIN = "your-domain.com:8081"

// –°—Ç–æ–∏–º–æ—Å—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∑–∞ –¥–µ–Ω—å (–≤ —Ä—É–±–ª—è—Ö)
PRICE_PER_DAY = 5
```

---
### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞

```go
// –õ–∏–º–∏—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ –ì–ë (0 = –±–µ–∑–ª–∏–º–∏—Ç)
TRAFFIC_LIMIT_GB = 2

// –í–∫–ª—é—á–µ–Ω –ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞
TRAFFIC_RESET_ENABLED = true

// –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±—Ä–æ—Å–∞ —Ç—Ä–∞—Ñ–∏–∫–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
TRAFFIC_RESET_INTERVAL = 240 // 4 —á–∞—Å–∞

// –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ (–≤ –º–∏–Ω—É—Ç–∞—Ö)
TRAFFIC_CHECK_INTERVAL = 30
```
---
### 5. –§–æ—Ä–º–∞—Ç –∏–º–µ–Ω –∫–æ–Ω—Ñ–∏–≥–æ–≤
```go
// –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ª–∏ –¥–∞—Ç—ã –≤ –∏–º–µ–Ω–∞—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤
SHOW_DATES_IN_CONFIGS = true

// –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É
SUPPORT_LINK = "https://t.me/your_support"
```
**–§–æ—Ä–º–∞—Ç—ã –∏–º–µ–Ω –∫–æ–Ω—Ñ–∏–≥–æ–≤:**
- **–° –¥–∞—Ç–∞–º–∏** (`SHOW_DATES_IN_CONFIGS = true`):
  - `123456789 –¥–æ 2025 03 09` (–≥–æ–¥ –¥–µ–Ω—å –º–µ—Å—è—Ü)
  
- **–ë–µ–∑ –¥–∞—Ç** (`SHOW_DATES_IN_CONFIGS = false`):
  - `123456789` (—Ç–æ–ª—å–∫–æ Telegram ID)

## üìä –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/users` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º–∏ –∫–Ω–æ–ø–∫–∞–º–∏
- `/users50` - –ø–æ–∫–∞–∑–∞—Ç—å 50 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/users100` - –ø–æ–∫–∞–∑–∞—Ç—å 100 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/users400` - –ø–æ–∫–∞–∑–∞—Ç—å 400 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/users5000` - –ø–æ–∫–∞–∑–∞—Ç—å 5000 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–º–∞–∫—Å–∏–º—É–º)

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–æ–º
- `/traffic` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
- `/check_traffic_now` - —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–Ω—ã–º–∏ –ø–µ—Ä–∏–æ–¥–∞–º–∏
- `/trial` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–±–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤
- `/reset_trial` - —Å–±—Ä–æ—Å –≤—Å–µ—Ö –ø—Ä–æ–±–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- `/backup` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
- `/clear_users` - –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `/clear_database` - –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ —Ç—Ä–∞—Ñ–∏–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `common/config.go`
2. –ò–∑–º–µ–Ω–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
   ```go
   TRAFFIC_LIMIT_GB = 5         // –õ–∏–º–∏—Ç –≤ –ì–ë
   TRAFFIC_RESET_INTERVAL = 480 // –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±—Ä–æ—Å–∞ (8 —á–∞—Å–æ–≤)
   TRAFFIC_CHECK_INTERVAL = 60  // –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä–∫–∏ (1 —á–∞—Å)
   ```
---
## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ö–æ–º–∞–Ω–¥–∞ `/users` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

- **–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
- **–ü–ª–∞—Ç—è—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã** (—Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏)
- **–î–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥** (—Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏)
- **–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** (—Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏)
- **–î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
  - –ê–∫—Ç–∏–≤–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
  - –î–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–æ–±–Ω—ã–π
  - –ü–æ—Ç—Ä–∞—Ç–∏–ª–∏ –ø—Ä–æ–±–Ω—ã–π, –Ω–æ –Ω–µ –ø–ª–∞—Ç–∏–ª–∏
  - –û–±—â–∏–π –¥–æ—Ö–æ–¥
  - –ù–æ–≤—ã–µ –∑–∞ –Ω–µ–¥–µ–ª—é/–º–µ—Å—è—Ü
  - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–ª–∞—Ç—è—â–∏—Ö

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–ü–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è "–ü–æ–∫–∞–∑–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤" –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏:
- **üí∞ –ü–ª–∞—Ç–∏–ª–∏** - —Ç–æ–ª—å–∫–æ –ø–ª–∞—Ç—è—â–∏–µ –∫–ª–∏–µ–Ω—Ç—ã
- **üÜì –ú–æ–≥—É—Ç –ø—Ä–æ–±–æ–≤–∞—Ç—å** - –¥–æ—Å—Ç—É–ø–µ–Ω –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥
- **üîÑ –ü—Ä–æ–±–æ–≤–∞–ª–∏** - –ø–æ—Ç—Ä–∞—Ç–∏–ª–∏ –ø—Ä–æ–±–Ω—ã–π, –Ω–æ –Ω–µ –ø–ª–∞—Ç–∏–ª–∏
- **‚ùå –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ** - –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

---
## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è:
- –î–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ù–∞—Å—Ç—Ä–æ–µ–∫ —Ç—Ä–∞—Ñ–∏–∫–∞
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ IP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

- `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –±–æ—Ç–∞
- `traffic_configs` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
- `ip_connections` - IP –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `ip_violations` - –Ω–∞—Ä—É—à–µ–Ω–∏—è IP –ª–∏–º–∏—Ç–æ–≤

---
## üßπ –£—Ç–∏–ª–∏—Ç–∞ –æ—á–∏—Å—Ç–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–í –ø–∞–ø–∫–µ `tools/` –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö:

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Ç–∏–ª–∏—Ç—ã

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ example —Ñ–∞–π–ª:**
   ```bash
   cd tools
   cp .env.example .env
   ```

2. **–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`** —Å —Ç–µ–º–∏ –∂–µ –¥–∞–Ω–Ω—ã–º–∏, —á—Ç–æ –∏ –≤ `common/postgres.go`:
   ```bash
   PG_HOST=localhost
   PG_PORT=5432
   PG_USER=vpn_bot_user          # –¢–æ—Ç –∂–µ, —á—Ç–æ –≤ common/postgres.go
   PG_PASSWORD=your_real_password # –¢–æ—Ç –∂–µ, —á—Ç–æ –≤ common/postgres.go
   PG_DBNAME=vpn_bot             # –¢–æ—Ç –∂–µ, —á—Ç–æ –≤ common/postgres.go
   PG_SSLMODE=disable
   ```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç—ã

```bash
cd tools
./cleanup_tool
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É—Ç–∏–ª–∏—Ç—ã:**
- üìã **–ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –±–∞–ª–∞–Ω—Å–∞–º–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
- üîÑ **–°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–±–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã** - —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–æ–≤ `has_used_trial` —É –≤—Å–µ—Ö –∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üóëÔ∏è **–£–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üí£ **–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—é –ë–î** - –ø–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü —Å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

**‚ùó –í–ù–ò–ú–ê–ù–ò–ï**: 
- –£—Ç–∏–ª–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ç–æ–π –∂–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö, —á—Ç–æ –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –±–æ—Ç
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- –§–∞–π–ª `.env` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ git (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

## üöÄ –ó–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
   ```bash
   git clone <your-repo-url>
   cd bot
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
   ```bash
   cp common/config.go.example common/config.go
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ common/config.go —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
   ```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
   ```bash
   go mod tidy
   ```

5. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL**
```bash
sudo apt update
sudo apt install postgresql postgresql-contrib
sudo systemctl start postgresql
sudo systemctl enable postgresql
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL** - –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `common/postgres.go` —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –ë–î

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:**
   ```bash
   go run main.go
   ```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∑–∞–ø—É—Å–∫ (—Å–±–æ—Ä–∫–∞)

```bash
# –°–æ–±—Ä–∞—Ç—å –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
go build -o bot main.go

# –ó–∞–ø—É—Å—Ç–∏—Ç—å
./bot
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –±–æ—Ç–∞ –ø–æ–¥—Ä–æ–±–Ω–æ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª–∏ –µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ `go run main.go` –∏–ª–∏ `journalctl -u vless-bot.service -f` –≤ —Å–ª—É—á–∞–µ —Å –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–º
- –£–¥–æ–±–Ω–æ –≤—ã–∏—Å–∫–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, –µ—Å–ª–∏ –æ–Ω–∏ –ø–æ—è–≤–∏–ª–∏—Å—å
- –õ—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
- –°–±—Ä–æ—Å —Ç—Ä–∞—Ñ–∏–∫–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –¢–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è