#!/bin/bash

# üîÑ –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —è–∑—ã–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Go –≤ VS Code

echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —è–∑—ã–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ Go –≤ VS Code..."

# 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ VS Code –∑–∞–ø—É—â–µ–Ω
if ! pgrep -f "code" > /dev/null; then
    echo "‚ùå VS Code –Ω–µ –∑–∞–ø—É—â–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç–µ VS Code —Å–Ω–∞—á–∞–ª–∞."
    exit 1
fi

echo "‚úÖ VS Code –∑–∞–ø—É—â–µ–Ω"

# 2. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —è–∑—ã–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
echo "üîÑ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–º–∞–Ω–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ —è–∑—ã–∫–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞..."

# –ü–æ–ø—Ä–æ–±—É–µ–º —á–µ—Ä–µ–∑ code CLI
code --command "go.restartLanguageServer" 2>/dev/null || echo "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É —á–µ—Ä–µ–∑ CLI"

# 3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± - —á–µ—Ä–µ–∑ gopls
echo "üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ gopls..."
pkill -f gopls 2>/dev/null || echo "gopls –Ω–µ –∑–∞–ø—É—â–µ–Ω"

# 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã Go
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Go..."
code --command "go.locateTools" 2>/dev/null || echo "‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ CLI"

echo ""
echo "‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∑–∞–≤–µ—Ä—à–µ–Ω!"
echo ""
echo "üìã –ß—Ç–æ –¥–∞–ª—å—à–µ:"
echo "1. –í VS Code –Ω–∞–∂–º–∏—Ç–µ Ctrl+Shift+P"
echo "2. –í–≤–µ–¥–∏—Ç–µ 'Go: Restart Language Server'"
echo "3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É"
echo "4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å .go —Ñ–∞–π–ª (Ctrl+S)"
echo ""
echo "üß™ –¢–µ—Å—Ç:"
echo "1. –û—Ç–∫—Ä–æ–π—Ç–µ test_format.go"
echo "2. –ò–∑–º–µ–Ω–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –Ω–∞ //—Ç–µ—Å—Ç"
echo "3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª (Ctrl+S)"
echo "4. –î–æ–ª–∂–Ω–æ —Å—Ç–∞—Ç—å // —Ç–µ—Å—Ç"
